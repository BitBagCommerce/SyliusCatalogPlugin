<?xml version="1.0" encoding="UTF-8"?>

<container xmlns="http://symfony.com/schema/dic/services" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">
        <services>
            <service id="bitbag_sylius_catalog_plugin.registry_catalog_rule_checker.elasticsearch" class="Sylius\Component\Registry\ServiceRegistry">
                <argument>BitBag\SyliusCatalogPlugin\Checker\Rule\Elasticsearch\RuleInterface</argument>
                <argument>rule checker</argument>
            </service>
            <service id="bitbag_sylius_catalog_plugin.form_registry.catalog_rule_checker.elasticsearch" class="Sylius\Bundle\ResourceBundle\Form\Registry\FormTypeRegistry" />


            <service id="bitbag.sylius_catalog_plugin.query_builder.product_query_builder" class="BitBag\SyliusCatalogPlugin\QueryBuilder\ProductQueryBuilder">
                <argument type="service" id="bitbag_sylius_catalog_plugin.registry_catalog_rule_checker.elasticsearch" />
            </service>

            <service id="bitbag.resolver.catalog.product_resource" class="BitBag\SyliusCatalogPlugin\Resolver\Elasticsearch\ProductResolver">
                <argument type="service" id="bitbag.sylius_catalog_plugin.query_builder.product_query_builder" />
                <argument type="service" id="fos_elastica.finder.bitbag_shop_product.default" />
            </service>

            <service id="bitbag.resolver.catalog.product_catalog_resolver" class="BitBag\SyliusCatalogPlugin\Resolver\Elasticsearch\ProductCatalogResolver">
                <argument type="service" id="bitbag_sylius_catalog_plugin.repository.catalog" />
                <argument type="service" id="bitbag.sylius_catalog_plugin.query_builder.product_query_builder" />
                <argument type="service" id="fos_elastica.finder.bitbag_shop_product.default" />
            </service>

            <service id="bitbag_sylius_catalog_plugin.catalog_rule_checker.elasticsearch.by_name" class="BitBag\SyliusCatalogPlugin\Checker\Rule\Elasticsearch\ProductNameRule">
                <tag name="bitbag_sylius_catalog_plugin.catalog_rule_checker" type="sort_by_name" label="bitbag_sylius_catalog_plugin.ui.form.catalog_rule.sort_by_name" form-type="BitBag\SyliusCatalogPlugin\Form\Type\ProductNameConfigurationType"/>
                <argument type="service" id="bitbag_sylius_elasticsearch_plugin.query_builder.products_by_partial_name" />
            </service>
        </services>
</container>
